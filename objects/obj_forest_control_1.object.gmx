<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_global_control</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

instance_create(0, 0, obj_autumn_fall);

if (global.previous_room == "dark_forest_2")
{
    instance_create(room_width - 200, 980, obj_mainhero);
    obj_mainhero.image_xscale = -1;
}
else instance_create(240, 980, obj_mainhero);

if (global.tutorial[0] == 0) // Only in the first time
{
    instance_create(2080, 140, obj_masquerade);
    instance_create(0, 0, obj_fade_effect);
    global.uncomplete[0] = "Квест 1: Разведать обстановку.";
    global.uncomplete[1] = "Квест 2: Побеседовать с Советником.";
    global.uncomplete[2] = "Квест 3: Найти обелиск пламени.";
    
    if (instance_exists(obj_mainhero))
    {
        global.character[8] = global.character[0]; //Setup current value of HP
        global.character[9] = global.character[7]; //Setup current value of AP
    }
}
else
{
    instance_create(1880, 980, obj_sandbox);
}

text = "";
tutorial_text[0] = "Зажмите [Tab] для просмотра текущих целей и квестов. Журнал неактивен во время паузы (ЛКМ - далее).";
tutorial_text[2] = "Уверен, эта штука за мной следит! Надо бы проверить ее при помощи ПКМ (ЛКМ - далее).";
tutorial_text[1] = "В гиде по выживанию [Esc] всегда можно прочесть свежие игровые подсказки (ЛКМ - далее).";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Clear text of tutorial message

global.pause = paused.non_pause;
text = "";
global.greatInfo = "";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Basic events for forest_controller

event_inherited();

esc_forbidden = false;

if (text != "")
{
    global.greatInfo = text;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Parallax settings

background_x[1]=floor(view_xview[0]*0.8);
background_x[2]=floor(view_xview[0]*0.4);
background_x[3]=floor(view_xview[0]*0.2);
background_x[4]=floor(view_xview[0]*0.2);
background_x[5]=floor(view_xview[0]*0.01);

background_y[1]=floor(view_yview[0]*0.8);
background_y[2]=floor(view_yview[0]*0.4);
background_y[3]=floor(view_yview[0]*0.2);
background_y[4]=floor(view_yview[0]*0.2);
background_y[5]=floor(view_yview[0]*0.01);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Tutorials [0-2] with game pause (only once)

if (instance_exists(obj_mainhero))
{
    if (obj_mainhero.x &gt; 910 and global.tutorial[0] == 0) global.tutorial[0]++;
    if (obj_mainhero.x &gt; 1700 and global.tutorial[1] == 0) global.tutorial[1]++;
    if (obj_mainhero.x &gt; 2294 and global.tutorial[2] == 0) global.tutorial[2]++;
}

for (i = 0; i &lt; 3; i++)
{
    if (global.tutorial[i] == 1) //Block pause menu if tutorial is active
    {
        esc_forbidden = true;
        global.tutorial[i]++;
        global.pause = paused.pause;
        text = tutorial_text[i];
        break;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Break tutorial pause earlier

for (i = 0; i &lt; 3; i++)
{
    if (global.tutorial[i] &gt; 1 and global.tutorial[i] != 13 and global.pause == paused.pause)
    {
        alarm[10] = 4;
        global.tutorial[i] = 13;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.previous_room = "dark_forest_1";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.tutorial[0] == 0 and instance_exists(obj_mainhero))
{
    if (obj_mainhero.image_xscale &gt; 0) draw_sprite(spr_key_WASD, 0, obj_mainhero.x + 86, obj_mainhero.y - obj_mainhero.sprite_height - 12);
    else draw_sprite(spr_key_WASD, 0, obj_mainhero.x - 86, obj_mainhero.y - obj_mainhero.sprite_height - 12);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Break tutorial pause earlier

for (i = 0; i &lt; 3; i++)
{
    if (global.tutorial[i] &gt; 1 and global.tutorial[i] != 13 and global.pause == paused.pause)
    {
        alarm[10] = 4;
        global.tutorial[i] = 13;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
