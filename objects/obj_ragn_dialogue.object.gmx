<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_ragn_dialogue</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>xx = x - sprite_width / 2; //start x-point of dialogue sprite
yy = y - sprite_height / 2; //start y-point of dialogue sprite

input_text = ui_textbox_create(xx + 364, yy + 640, 1000, ui_default, "Введите ответ:");

ui_set_background_colour(input_text, ui_blue_grey);
ui_set_foreground_colour(input_text, ui_blue_grey);

file = file_text_open_read("ragn_text_1.txt");
info = 0;

while(!file_text_eof(file))
{
    str = file_text_readln(file);
    if (string_pos("#", str) != 0)
    {
        sub_str = string_copy(str, 0, 5);
        
        num = real(string_digits(sub_str));
        if (num != 0) 
        {
            info[num - 1, 0] = str;
        }
        k = 1;
    }
    if (string_pos("@", str) != 0)
    {
        if (num != 0)
        {
            info[num - 1, k++] = str;
        }
    }
}
file_text_close(file);

pointer = 0;
string_w = sprite_width - 400;
separator = 42;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (keyboard_check_released(vk_enter))
{
    for (k = 1; k &lt; array_length_2d(info, pointer); k++)
    {
        var sub_string = string_copy(info[pointer, k], 1, 4);
        var numbers = string_digits(sub_string);
        var temp_string = string_replace_all(info[pointer, k], "#", "");
        temp_string = string_replace_all(temp_string, "@", "");
        temp_string = string_replace_all(temp_string, numbers, "");
        temp_string = string_replace_all(temp_string, chr(10), "");
        
        if (temp_string == ui_get_text(input_text))
        {
            var pointer_t = real(string_digits(info[pointer, k]));
            switch (pointer_t)
            {
                case 8:
                    obj_ragn_control.final_1 = 1;
                break;
                
                case 14:
                    obj_ragn_control.final_2 = 1;
                break;
                            
                default:
                    pointer = pointer_t - 1;
                    ds_map_replace(input_text, "ui_text", "");
                    ds_map_replace(input_text, "ui_alias_text", "");
                    ds_map_replace(input_text, "ui_beam_position", 0);
                    keyboard_string = ""; io_clear();
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite(spr_blur_ragn, 0, 0, 0);
draw_self();
myColor = make_color_rgb(226, 226, 226);
ui_draw_all();

draw_sprite(spr_icon_aid, 0, xx + 180, yy + 520);
draw_set_font(Kramola);
draw_text_colour(xx + 158, yy + 618, "Эйд", myColor, myColor, myColor, myColor, 1);

draw_sprite(spr_icon_oldman, 0, xx + 180, yy + 108);
draw_text_colour(xx + 118, yy + 200, "Советник", myColor, myColor, myColor, myColor, 1);

draw_set_font(Eufloria);
draw_text_colour(xx + 40, yy + 264, "Осталось АР: *,*", c_white, c_white, c_white, c_white, 1);
draw_text_colour(xx + 40, yy + 304, "Отношение: *,*", c_white, c_white, c_white, c_white, 1);
draw_text_colour(xx + 40, yy + 344, "Принадлежность: *,*", c_white, c_white, c_white, c_white, 1);

text = 0; text[0] = info[pointer, 0];

for (k = 1; k &lt; array_length_2d(info, pointer); k++)
{
    text[k] = info[pointer, k];
}

for (k = 0; k &lt; array_length_1d(text); k++)
{
    sub_str = string_copy(text[k], 0, 5);
    num = string_digits(sub_str);
    text[k] = string_replace_all(text[k], "#", "");
    text[k] = string_replace_all(text[k], "@", "");
    text[k] = string_replace_all(text[k], num, "");
}

draw_text_ext_transformed_colour(xx + 364, yy + 40, text[0], separator, string_w, 1, 1, 0, 
                                                    myColor, myColor, myColor, myColor, 1);
offset = 454;

for (k = 1; k &lt; array_length_2d(info, pointer); k++)
{
    draw_text_ext_transformed_colour(xx + 364, yy + offset, text[k], separator, string_w, 1, 1, 0, 
                                                            myColor, myColor, myColor, myColor, 1);    
    offset += separator + separator * floor(string_width(info[pointer, k]) / string_w);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
